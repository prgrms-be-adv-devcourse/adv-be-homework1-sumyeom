<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Toss Payment Demo</title>
    <script src="https://js.tosspayments.com/v1/payment"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2rem;
        }
        button {
            margin-top: 1.5rem;
            padding: 0.75rem 1.5rem;
            background-color: #3182f6;
            color: white;
            border: none;
            cursor: pointer;
        }
        input {
            margin-top: 1rem;
            padding: 0.5rem;
            width: 250px;
        }
    </style>
</head>
<body>
<h1>Toss ê²°ì œ í…ŒìŠ¤íŠ¸</h1>
<p>ì•„ë˜ì— ì£¼ë¬¸ IDë¥¼ ì…ë ¥í•˜ê³  ê²°ì œí•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</p>

<label for="orderId">ì£¼ë¬¸ ID ì…ë ¥:</label>
<input type="text" id="orderId" placeholder="ì˜ˆ: order_12345">

<br>

<button id="pay-button">ê²°ì œí•˜ê¸°</button>

<script>
    document.addEventListener('DOMContentLoaded', async function () {
        try {
            if (typeof window.TossPayments !== 'function') {
                throw new Error('TossPayments is not defined. ìŠ¤í¬ë¦½íŠ¸ê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');
            }

            const clientKey = 'test_ck_XZYkKL4MrjjKDXBJeog1r0zJwlEW'; // í…ŒìŠ¤íŠ¸ í‚¤

            const tossPayments = window.TossPayments(clientKey);
            const amount = 1000;

            document.getElementById('pay-button').addEventListener('click', function () {

                // ğŸ”¹ ì…ë ¥ë°›ì€ orderId ê°€ì ¸ì˜¤ê¸°
                const orderId = document.getElementById('orderId').value.trim();

                if (!orderId) {
                    alert('ì£¼ë¬¸ IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                tossPayments.requestPayment('ê°„í¸ê²°ì œ', {
                    orderId: orderId,          // ğŸ”¹ ì…ë ¥ê°’ ì „ë‹¬!
                    amount: amount,
                    orderName: 'í…ŒìŠ¤íŠ¸ ìƒí’ˆ',
                    successUrl: 'http://localhost:8080/payments/success.html',
                    failUrl: 'http://localhost:8080/payments/fail.html'
                });
            });
        } catch (error) {
            console.error('Toss ìœ„ì ¯ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
            alert('Toss ìœ„ì ¯ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”.');
        }
    });
</script>
</body>
</html>
